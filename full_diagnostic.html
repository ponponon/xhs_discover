<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ’ä»¶å®Œæ•´è¯Šæ–­å·¥å…·</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      background: #f5f5f5;
    }
    h1 {
      color: #ff2442;
      margin-bottom: 30px;
    }
    .section {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
    }
    .section h2 {
      margin-top: 0;
      color: #333;
      border-bottom: 2px solid #ff2442;
      padding-bottom: 10px;
    }
    .result {
      padding: 15px;
      margin: 10px 0;
      border-radius: 6px;
      font-size: 14px;
    }
    .success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .warning {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    .info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    pre {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.5;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
    button {
      background: #ff2442;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.3s;
    }
    button:hover {
      background: #e01f3a;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 36, 66, 0.3);
    }
    .step {
      margin: 15px 0;
      padding: 15px;
      background: #f9f9f9;
      border-left: 4px solid #ff2442;
      border-radius: 4px;
    }
    .step-number {
      display: inline-block;
      width: 30px;
      height: 30px;
      background: #ff2442;
      color: white;
      text-align: center;
      line-height: 30px;
      border-radius: 50%;
      font-weight: bold;
      margin-right: 10px;
    }
    .checklist {
      list-style: none;
      padding: 0;
    }
    .checklist li {
      padding: 10px;
      margin: 5px 0;
      background: #f8f9fa;
      border-radius: 4px;
      display: flex;
      align-items: center;
    }
    .checklist li::before {
      content: 'â˜';
      margin-right: 10px;
      font-size: 18px;
    }
    .checklist li.checked::before {
      content: 'â˜‘';
      color: #28a745;
    }
    .console-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 12px;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #333;
    }
    .console-line {
      padding: 2px 0;
      border-bottom: 1px solid #2d2d2d;
    }
    .console-line.error {
      color: #f48771;
    }
    .console-line.success {
      color: #89d185;
    }
    .console-line.warning {
      color: #dcdcaa;
    }
    .console-line.info {
      color: #4fc1ff;
    }
  </style>
</head>
<body>
  <h1>ğŸ” å°çº¢ä¹¦æ’ä»¶å®Œæ•´è¯Šæ–­å·¥å…·</h1>

  <div class="section">
    <h2>ğŸ“‹ è¯Šæ–­æ­¥éª¤</h2>
    <p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é€æ­¥æ’æŸ¥é—®é¢˜ï¼š</p>

    <div class="step">
      <span class="step-number">1</span>
      <strong>æ£€æŸ¥æ’ä»¶æ˜¯å¦å®‰è£…</strong>
      <ul>
        <li>æ‰“å¼€ <code>chrome://extensions/</code></li>
        <li>æ‰¾åˆ°"å°çº¢ä¹¦å¸–å­æå–å™¨"</li>
        <li>ç¡®è®¤æ’ä»¶å·²å¯ç”¨ï¼ˆå¼€å…³æ˜¯æ‰“å¼€çš„ï¼‰</li>
      </ul>
    </div>

    <div class="step">
      <span class="step-number">2</span>
      <strong>æ£€æŸ¥æ’ä»¶æƒé™</strong>
      <ul>
        <li>åœ¨æ’ä»¶è¯¦æƒ…é¡µï¼Œç‚¹å‡»"æƒé™"æˆ–"æŸ¥çœ‹æƒé™"</li>
        <li>ç¡®è®¤æœ‰ä»¥ä¸‹æƒé™ï¼š
          <ul>
            <li>activeTab</li>
            <li>scripting</li>
            <li>downloads</li>
          </ul>
        </li>
        <li>ç¡®è®¤æœ‰è®¿é—® <code>https://www.xiaohongshu.com/*</code> çš„æƒé™</li>
      </ul>
    </div>

    <div class="step">
      <span class="step-number">3</span>
      <strong>é‡æ–°åŠ è½½æ’ä»¶</strong>
      <ul>
        <li>åœ¨æ’ä»¶è¯¦æƒ…é¡µï¼Œç‚¹å‡»åˆ·æ–°æŒ‰é’® ğŸ”„</li>
        <li>ç­‰å¾…æ’ä»¶é‡æ–°åŠ è½½å®Œæˆ</li>
      </ul>
    </div>

    <div class="step">
      <span class="step-number">4</span>
      <strong>æ£€æŸ¥æ’ä»¶é”™è¯¯</strong>
      <ul>
        <li>åœ¨æ’ä»¶è¯¦æƒ…é¡µï¼Œç‚¹å‡»"é”™è¯¯"æŒ‰é’®ï¼ˆå¦‚æœæœ‰ï¼‰</li>
        <li>æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</li>
        <li>å¦‚æœæœ‰é”™è¯¯ï¼Œè¯·å¤åˆ¶é”™è¯¯ä¿¡æ¯</li>
      </ul>
    </div>

    <div class="step">
      <span class="step-number">5</span>
      <strong>æµ‹è¯•Content Script</strong>
      <ul>
        <li>è®¿é—® <code>https://www.xiaohongshu.com/explore</code></li>
        <li>æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
        <li>åˆ‡æ¢åˆ° Console æ ‡ç­¾</li>
        <li>è¿è¡Œä¸‹é¢çš„æµ‹è¯•ä»£ç </li>
      </ul>
    </div>
  </div>

  <div class="section">
    <h2>ğŸ§ª Content Script æµ‹è¯•ä»£ç </h2>
    <p>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°å°çº¢ä¹¦é¡µé¢çš„ Console ä¸­è¿è¡Œï¼š</p>
    <pre id="testCode">
// æµ‹è¯•1: æ£€æŸ¥é¡µé¢URL
console.log('=== æµ‹è¯•1: æ£€æŸ¥é¡µé¢URL ===');
console.log('å½“å‰URL:', window.location.href);
console.log('æ˜¯å¦ä¸ºæ¢ç´¢é¡µ:', window.location.href.includes('xiaohongshu.com/explore'));

// æµ‹è¯•2: æ£€æŸ¥å¸–å­å®¹å™¨
console.log('\n=== æµ‹è¯•2: æ£€æŸ¥å¸–å­å®¹å™¨ ===');
const feedsContainer = document.getElementById('exploreFeeds');
console.log('exploreFeidså®¹å™¨:', feedsContainer ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');

// æµ‹è¯•3: æ£€æŸ¥å¸–å­å…ƒç´ 
console.log('\n=== æµ‹è¯•3: æ£€æŸ¥å¸–å­å…ƒç´  ===');
const noteItems = document.querySelectorAll('.note-item');
console.log('å¸–å­æ•°é‡:', noteItems.length);

// æµ‹è¯•4: æµ‹è¯•é€‰æ‹©å™¨
console.log('\n=== æµ‹è¯•4: æµ‹è¯•é€‰æ‹©å™¨ ===');
if (noteItems.length > 0) {
  const firstPost = noteItems[0];
  console.log('å°é¢å›¾:', firstPost.querySelector('.cover img') ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°');
  console.log('æ ‡é¢˜:', firstPost.querySelector('.footer .title span') ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°');
  console.log('ä½œè€…:', firstPost.querySelector('.author-wrapper .author .name') ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°');
  console.log('ç‚¹èµæ•°:', firstPost.querySelector('.author-wrapper .like-wrapper .count') ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°');
  console.log('é“¾æ¥:', firstPost.querySelector('.cover') ? 'æ‰¾åˆ°' : 'æœªæ‰¾åˆ°');
}

// æµ‹è¯•5: æµ‹è¯•æ¶ˆæ¯ç›‘å¬
console.log('\n=== æµ‹è¯•5: æµ‹è¯•æ¶ˆæ¯ç›‘å¬ ===');
console.log('chromeå¯¹è±¡:', typeof chrome);
console.log('chrome.runtime:', typeof chrome.runtime);
console.log('chrome.runtime.onMessage:', typeof chrome.runtime.onMessage);

// æµ‹è¯•6: æ‰‹åŠ¨æå–æ•°æ®
console.log('\n=== æµ‹è¯•6: æ‰‹åŠ¨æå–æ•°æ® ===');
const posts = [];
noteItems.forEach((item, index) => {
  const coverImg = item.querySelector('.cover img');
  const titleElement = item.querySelector('.footer .title span');
  const authorElement = item.querySelector('.author-wrapper .author .name');
  const likeCountElement = item.querySelector('.author-wrapper .like-wrapper .count');
  const linkElement = item.querySelector('.cover');

  const post = {
    index: index + 1,
    coverImage: coverImg ? coverImg.src : '',
    title: titleElement ? titleElement.textContent.trim() : '',
    author: authorElement ? authorElement.textContent.trim() : '',
    likeCount: likeCountElement ? likeCountElement.textContent.trim() : '0',
    postLink: linkElement ? linkElement.href : ''
  };

  if (post.coverImage || post.title) {
    posts.push(post);
  }
});
console.log('æˆåŠŸæå–å¸–å­æ•°:', posts.length);
console.log('å‰3ä¸ªå¸–å­:', posts.slice(0, 3));

console.log('\n=== æµ‹è¯•å®Œæˆ ===');
    </pre>
    <button onclick="copyTestCode()">å¤åˆ¶æµ‹è¯•ä»£ç </button>
  </div>

  <div class="section">
    <h2>ğŸ”§ Popup æµ‹è¯•ä»£ç </h2>
    <p>åœ¨æ’ä»¶å¼¹çª—çš„å¼€å‘è€…å·¥å…·ä¸­è¿è¡Œï¼ˆå³é”®ç‚¹å‡»æ’ä»¶å›¾æ ‡ â†’ æ£€æŸ¥å¼¹å‡ºçª—å£ï¼‰ï¼š</p>
    <pre id="popupTestCode">
// æµ‹è¯•1: æ£€æŸ¥å½“å‰æ ‡ç­¾é¡µ
console.log('=== Popup æµ‹è¯• ===');
chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
  console.log('å½“å‰æ ‡ç­¾é¡µ:', tabs[0].url);
  console.log('æ˜¯å¦ä¸ºæ¢ç´¢é¡µ:', tabs[0].url.includes('xiaohongshu.com/explore'));
  
  // æµ‹è¯•2: å‘é€æ¶ˆæ¯åˆ°content script
  console.log('\nå‘é€æ¶ˆæ¯åˆ°content script...');
  chrome.tabs.sendMessage(tabs[0].id, { action: 'EXTRACT_POSTS' }, (response) => {
    if (chrome.runtime.lastError) {
      console.error('å‘é€æ¶ˆæ¯å¤±è´¥:', chrome.runtime.lastError);
    } else {
      console.log('æ”¶åˆ°å“åº”:', response);
      if (response && response.success) {
        console.log('æå–çš„å¸–å­æ•°:', response.posts.length);
        console.log('ç¬¬ä¸€ä¸ªå¸–å­:', response.posts[0]);
      }
    }
  });
});
    </pre>
    <button onclick="copyPopupTestCode()">å¤åˆ¶Popupæµ‹è¯•ä»£ç </button>
  </div>

  <div class="section">
    <h2>ğŸ“Š å¸¸è§é—®é¢˜æ’æŸ¥</h2>

    <h3>é—®é¢˜1: ç‚¹å‡»"æå–å¸–å­"æ²¡æœ‰ååº”</h3>
    <div class="warning">
      <strong>å¯èƒ½åŸå› ï¼š</strong>
      <ul>
        <li>Content scriptæœªæ³¨å…¥</li>
        <li>é¡µé¢URLä¸åŒ¹é…</li>
        <li>æ¶ˆæ¯ä¼ é€’å¤±è´¥</li>
      </ul>
      <strong>è§£å†³æ–¹æ³•ï¼š</strong>
      <ul>
        <li>è¿è¡Œä¸Šé¢çš„æµ‹è¯•ä»£ç æ£€æŸ¥</li>
        <li>æ£€æŸ¥Consoleæ˜¯å¦æœ‰é”™è¯¯</li>
        <li>ç¡®è®¤é¡µé¢URLæ˜¯ https://www.xiaohongshu.com/explore</li>
      </ul>
    </div>

    <h3>é—®é¢˜2: æ˜¾ç¤º"æå–å¤±è´¥ï¼Œè¯·ç¡®ä¿é¡µé¢å·²å®Œå…¨åŠ è½½"</h3>
    <div class="warning">
      <strong>å¯èƒ½åŸå› ï¼š</strong>
      <ul>
        <li>é¡µé¢è¿˜åœ¨åŠ è½½ä¸­</li>
        <li>æ‰¾ä¸åˆ°å¸–å­å…ƒç´ </li>
        <li>Content scriptè¿”å›é”™è¯¯</li>
      </ul>
      <strong>è§£å†³æ–¹æ³•ï¼š</strong>
      <ul>
        <li>ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½</li>
        <li>å‘ä¸‹æ»šåŠ¨é¡µé¢è®©æ›´å¤šå¸–å­åŠ è½½</li>
        <li>è¿è¡Œæµ‹è¯•ä»£ç æ£€æŸ¥æ˜¯å¦èƒ½æ‰¾åˆ°å¸–å­</li>
      </ul>
    </div>

    <h3>é—®é¢˜3: æå–çš„å¸–å­æ•°ä¸º0</h3>
    <div class="warning">
      <strong>å¯èƒ½åŸå› ï¼š</strong>
      <ul>
        <li>DOMç»“æ„å·²æ”¹å˜</li>
        <li>é€‰æ‹©å™¨ä¸åŒ¹é…</li>
        <li>é¡µé¢ä½¿ç”¨äº†è™šæ‹Ÿæ»šåŠ¨</li>
      </ul>
      <strong>è§£å†³æ–¹æ³•ï¼š</strong>
      <ul>
        <li>è¿è¡Œæµ‹è¯•ä»£ç æ£€æŸ¥é€‰æ‹©å™¨</li>
        <li>æŸ¥çœ‹ç¬¬ä¸€ä¸ªå¸–å­çš„HTMLç»“æ„</li>
        <li>æ›´æ–°content.jsä¸­çš„é€‰æ‹©å™¨</li>
      </ul>
    </div>

    <h3>é—®é¢˜4: Content scriptæœªåŠ è½½</h3>
    <div class="error">
      <strong>æ£€æŸ¥æ–¹æ³•ï¼š</strong>
      <ol>
        <li>æ‰“å¼€ chrome://extensions/</li>
        <li>æ‰¾åˆ°æ’ä»¶ï¼Œç‚¹å‡»"æ£€æŸ¥è§†å›¾"</li>
        <li>æŸ¥çœ‹Consoleæ˜¯å¦æœ‰é”™è¯¯</li>
        <li>æŸ¥çœ‹Networkæ ‡ç­¾ï¼Œç¡®è®¤content.jsæ˜¯å¦åŠ è½½</li>
      </ol>
    </div>
  </div>

  <div class="section">
    <h2>âœ… æ£€æŸ¥æ¸…å•</h2>
    <ul class="checklist">
      <li>æ’ä»¶å·²å®‰è£…å¹¶å¯ç”¨</li>
      <li>æ’ä»¶æƒé™æ­£ç¡®é…ç½®</li>
      <li>å·²é‡æ–°åŠ è½½æ’ä»¶</li>
      <li>æ²¡æœ‰æ’ä»¶é”™è¯¯</li>
      <li>è®¿é—®çš„æ˜¯æ­£ç¡®çš„URL</li>
      <li>é¡µé¢å·²å®Œå…¨åŠ è½½</li>
      <li>èƒ½çœ‹åˆ°å¸–å­å†…å®¹</li>
      <li>æµ‹è¯•ä»£ç èƒ½æ‰¾åˆ°å¸–å­å…ƒç´ </li>
      <li>æ¶ˆæ¯ç›‘å¬å™¨æ­£å¸¸å·¥ä½œ</li>
      <li>èƒ½æ‰‹åŠ¨æå–æ•°æ®</li>
    </ul>
  </div>

  <div class="section">
    <h2>ğŸ“ å¦‚ä½•åé¦ˆé—®é¢˜</h2>
    <p>å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
    <ul>
      <li>Chromeç‰ˆæœ¬å·</li>
      <li>æ’ä»¶ç‰ˆæœ¬å·</li>
      <li>Consoleä¸­çš„é”™è¯¯ä¿¡æ¯</li>
      <li>æµ‹è¯•ä»£ç çš„è¾“å‡ºç»“æœ</li>
      <li>æ’ä»¶è¯¦æƒ…é¡µçš„é”™è¯¯ä¿¡æ¯</li>
      <li>ç¬¬ä¸€ä¸ªå¸–å­çš„HTMLç»“æ„</li>
    </ul>
  </div>

  <script>
    function copyTestCode() {
      const code = document.getElementById('testCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('æµ‹è¯•ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
      }).catch(err => {
        console.error('å¤åˆ¶å¤±è´¥:', err);
        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
      });
    }

    function copyPopupTestCode() {
      const code = document.getElementById('popupTestCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('Popupæµ‹è¯•ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
      }).catch(err => {
        console.error('å¤åˆ¶å¤±è´¥:', err);
        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
      });
    }
  </script>
</body>
</html>
